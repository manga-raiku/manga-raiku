/* eslint-disable camelcase */
import { createPinia, setActivePinia } from "pinia"

import ListChapters from "./ListChapters.vue"

setActivePinia(createPinia())

const chapters_long = [
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
    name: "Chương 27",
    update: 1628899200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-26.html",
    name: "Chương 26",
    update: 1628208000000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-25.html",
    name: "Chương 25",
    update: 1627776000000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-24.html",
    name: "Chương 24",
    update: 1627776000000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-23.html",
    name: "Chương 23",
    update: 1626480000000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-22.html",
    name: "Chương 22",
    update: 1626307200000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-21.html",
    name: "Chương 21",
    update: 1625788800000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-20.html",
    name: "Chương 20",
    update: 1625788800000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-19.html",
    name: "Chương 19",
    update: 1625788800000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-18.html",
    name: "Chương 18",
    update: 1625788800000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-17.html",
    name: "Chương 17",
    update: 1620345600000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-16.html",
    name: "Chương 16",
    update: 1619308800000,
    readed: true,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-15.html",
    name: "Chương 15",
    update: 1618876800000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-14.html",
    name: "Chương 14",
    update: 1606003200000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-13.html",
    name: "Chương 13",
    update: 1605571200000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-12.html",
    name: "Chương 12",
    update: 1605484800000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-11.html",
    name: "Chương 11",
    update: 1602979200000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-10.html",
    name: "Chương 10",
    update: 1592438400000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-9.html",
    name: "Chương 9",
    update: 1590969600000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-8.html",
    name: "Chương 8",
    update: 1589846400000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-7.html",
    name: "Chương 7",
    update: 1588550400000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-6.html",
    name: "Chương 6",
    update: 1587168000000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-5.html",
    name: "Chương 5",
    update: 1586217600000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-4.html",
    name: "Chương 4",
    update: 1585353600000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-3.html",
    name: "Chương 3",
    update: 1584144000000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-2.html",
    name: "Chương 2",
    update: 1584144000000,
    readed: false,
  },
  {
    path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-1.html",
    name: "Chương 1",
    update: 1584144000000,
    readed: false,
  },
].map((item) => {
  return {
    ...item,
    updated_at: item.update,
    id: 0,
  }
})

describe("ListChapters", () => {
  it("renders chapters", () => {
    const chapters = [
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-27.html",
        name: "Chương 27",
        update: 1628899200000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-26.html",
        name: "Chương 26",
        update: 1628208000000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-25.html",
        name: "Chương 25",
        update: 1627776000000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-24.html",
        name: "Chương 24",
        update: 1627776000000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-23.html",
        name: "Chương 23",
        update: 1626480000000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-22.html",
        name: "Chương 22",
        update: 1626307200000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-21.html",
        name: "Chương 21",
        update: 1625788800000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-20.html",
        name: "Chương 20",
        update: 1625788800000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-19.html",
        name: "Chương 19",
        update: 1625788800000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-18.html",
        name: "Chương 18",
        update: 1625788800000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-17.html",
        name: "Chương 17",
        update: 1620345600000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-16.html",
        name: "Chương 16",
        update: 1619308800000,
        readed: true,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-15.html",
        name: "Chương 15",
        update: 1618876800000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-14.html",
        name: "Chương 14",
        update: 1606003200000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-13.html",
        name: "Chương 13",
        update: 1605571200000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-12.html",
        name: "Chương 12",
        update: 1605484800000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-11.html",
        name: "Chương 11",
        update: 1602979200000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-10.html",
        name: "Chương 10",
        update: 1592438400000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-9.html",
        name: "Chương 9",
        update: 1590969600000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-8.html",
        name: "Chương 8",
        update: 1589846400000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-7.html",
        name: "Chương 7",
        update: 1588550400000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-6.html",
        name: "Chương 6",
        update: 1587168000000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-5.html",
        name: "Chương 5",
        update: 1586217600000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-4.html",
        name: "Chương 4",
        update: 1585353600000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-3.html",
        name: "Chương 3",
        update: 1584144000000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-2.html",
        name: "Chương 2",
        update: 1584144000000,
        readed: false,
      },
      {
        path: "/truyen-tranh/kanojo-mo-kanojo-9164-chap-1.html",
        name: "Chương 1",
        update: 1584144000000,
        readed: false,
      },
    ].map((item) => {
      return {
        ...item,
        updated_at: item.update,
        id: 0,
      }
    })
    cy.mount(ListChapters, {
      props: {
        chapters,
      },
    })

    cy.get("ul").find("li").should("have.length", chapters.length)
  })

  it("split chapters to group size 50", () => {
    cy.mount(ListChapters, {
      props: {
        chapters: chapters_long,
      },
    })

    cy.get(".q-tab").should("have.length", 2)
    cy.get(".q-tab")
      .first()
      .should(($button) => {
        expect($button[0].innerText).to.contain("Ch. 27 - 4")
      })
  })

  it("segment first active", () => {
    cy.mount(ListChapters, {
      props: {
        chapters: chapters_long,
      },
    })

    cy.get(".q-tab").first().should("have.class", "!text-main-3")
  })
})
